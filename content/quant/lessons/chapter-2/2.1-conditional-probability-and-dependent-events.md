---
title: "Conditional Probability and Dependent Events"
chapter: 2
lesson: 1
author: "Quant Probability Team"
date: "2025-01-15"
description: "Understanding conditional probability and how it relates to dependent events in quantitative finance"
---

# 2.1 — Conditional Probability and Dependent Events

In Chapter 1, we learned about independence and dependence, and we briefly introduced conditional probability. Now we'll explore **conditional probability** in depth—one of the most important concepts in probability theory and quantitative finance. Conditional probability allows us to update our beliefs about events when we receive new information. This lesson introduces conditional probability formally and explores its relationship with dependent events.

## What is Conditional Probability?

**Conditional probability** is the probability of an event occurring given that another event has already occurred. Learn more: [Conditional Probability](https://en.wikipedia.org/wiki/Conditional_probability)

**Mathematical Definition:**

The conditional probability of event $B$ given event $A$ is:

$$P(B | A) = \frac{P(A \cap B)}{P(A)}$$

provided that $P(A) > 0$.

**Notation:** $P(B | A)$ is read as "the probability of $B$ given $A$" or "the probability of $B$ conditional on $A$."

**Intuitive Meaning:** We restrict our attention to outcomes where $A$ has occurred, and ask what fraction of those outcomes also have $B$ occurring.

## Understanding the Formula

The formula $P(B | A) = \frac{P(A \cap B)}{P(A)}$ can be understood as:

1. **Numerator** ($P(A \cap B)$): The probability that both $A$ and $B$ occur
2. **Denominator** ($P(A)$): The probability that $A$ occurs (our "new sample space")
3. **Result**: The fraction of $A$ outcomes that also have $B$

### Visual Intuition

If we think of probability as area:
- $P(A)$ is the area of event $A$
- $P(A \cap B)$ is the area where both $A$ and $B$ occur
- $P(B | A)$ is the fraction of $A$'s area that overlaps with $B$

## Basic Examples

### Example 1: Drawing Cards

A standard deck has 52 cards. We draw one card:

- $A$ = "Card is a heart": $P(A) = \frac{13}{52} = \frac{1}{4}$
- $B$ = "Card is a face card (J, Q, K)": $P(B) = \frac{12}{52} = \frac{3}{13}$
- $A \cap B$ = "Card is a heart AND a face card": $P(A \cap B) = \frac{3}{52}$

**Question:** What is the probability of drawing a face card given that we've drawn a heart?

$$P(B | A) = \frac{P(A \cap B)}{P(A)} = \frac{3/52}{13/52} = \frac{3}{13}$$

**Interpretation:** Among the 13 hearts, 3 are face cards, so the conditional probability is $\frac{3}{13}$.

### Example 2: Stock Price Movement

Consider a stock that can move up, down, or stay unchanged:

- $A$ = "Market is bullish": $P(A) = 0.6$
- $B$ = "Stock goes up": $P(B) = 0.5$
- $A \cap B$ = "Market is bullish AND stock goes up": $P(A \cap B) = 0.45$

**Question:** What is the probability the stock goes up given a bullish market?

$$P(B | A) = \frac{P(A \cap B)}{P(A)} = \frac{0.45}{0.6} = 0.75$$

**Interpretation:** In bullish markets, the stock goes up 75% of the time.

### Example 3: Portfolio Returns

A portfolio has three possible outcomes:
- High return: probability 0.3
- Medium return: probability 0.5
- Low return: probability 0.2

- $A$ = "Return is at least medium": $P(A) = 0.3 + 0.5 = 0.8$
- $B$ = "Return is high": $P(B) = 0.3$
- $A \cap B$ = "Return is high" (since high is included in "at least medium"): $P(A \cap B) = 0.3$

**Question:** What is the probability of a high return given that the return is at least medium?

$$P(B | A) = \frac{P(A \cap B)}{P(A)} = \frac{0.3}{0.8} = 0.375$$

**Interpretation:** Among outcomes with at least medium returns, 37.5% are high returns.

## Rearranging the Formula

The conditional probability formula can be rearranged to calculate joint probabilities:

$$P(A \cap B) = P(A) \cdot P(B | A)$$

This is called the **multiplication rule** or **chain rule** for probabilities.

**Key Insight:** The probability that both $A$ and $B$ occur equals the probability of $A$ times the probability of $B$ given $A$.

### Example: Sequential Events

Drawing two cards without replacement:

- $A$ = "First card is an ace": $P(A) = \frac{4}{52}$
- $B$ = "Second card is an ace": $P(B | A) = \frac{3}{51}$ (given first was ace)

$$P(A \cap B) = P(A) \cdot P(B | A) = \frac{4}{52} \cdot \frac{3}{51} = \frac{12}{2652} = \frac{1}{221}$$

## Conditional Probability and Independence

Recall from Chapter 1 (lesson 1.3) that events $A$ and $B$ are **independent** if:

$$P(A \cap B) = P(A) \cdot P(B)$$

Using conditional probability, we can express independence as:

$$P(B | A) = P(B)$$

**Interpretation:** If $A$ and $B$ are independent, knowing that $A$ occurred doesn't change the probability of $B$.

### Example: Independent Events

Two fair coin tosses:
- $A$ = "First coin is heads": $P(A) = \frac{1}{2}$
- $B$ = "Second coin is heads": $P(B) = \frac{1}{2}$
- $P(A \cap B) = \frac{1}{4}$

$$P(B | A) = \frac{P(A \cap B)}{P(A)} = \frac{1/4}{1/2} = \frac{1}{2} = P(B)$$

Since $P(B | A) = P(B)$, the events are independent.

### Example: Dependent Events

Drawing cards without replacement:
- $A$ = "First card is an ace": $P(A) = \frac{4}{52}$
- $B$ = "Second card is an ace": $P(B) = \frac{4}{52}$ (unconditional)
- $P(B | A) = \frac{3}{51} \neq \frac{4}{52} = P(B)$

Since $P(B | A) \neq P(B)$, the events are dependent.

## Conditional Probability with Multiple Events

We can condition on multiple events:

$$P(C | A \cap B) = \frac{P(A \cap B \cap C)}{P(A \cap B)}$$

provided that $P(A \cap B) > 0$.

### Chain Rule (General Form)

For multiple events, the chain rule extends:

$$P(A_1 \cap A_2 \cap ... \cap A_n) = P(A_1) \cdot P(A_2 | A_1) \cdot P(A_3 | A_1 \cap A_2) \cdot ... \cdot P(A_n | A_1 \cap ... \cap A_{n-1})$$

### Example: Drawing Three Cards

Drawing three cards without replacement:

- $A$ = "First card is an ace": $P(A) = \frac{4}{52}$
- $B$ = "Second card is an ace": $P(B | A) = \frac{3}{51}$
- $C$ = "Third card is an ace": $P(C | A \cap B) = \frac{2}{50}$

$$P(A \cap B \cap C) = P(A) \cdot P(B | A) \cdot P(C | A \cap B) = \frac{4}{52} \cdot \frac{3}{51} \cdot \frac{2}{50} = \frac{24}{132600} = \frac{1}{5525}$$

## Financial Applications

### Risk Assessment

**Example:** Credit risk analysis
- $A$ = "Economic recession": $P(A) = 0.1$
- $B$ = "Company defaults": $P(B) = 0.02$ (unconditional)
- $P(B | A) = 0.15$ (conditional on recession)

**Interpretation:** The default probability increases from 2% to 15% during a recession.

### Portfolio Management

**Example:** Sector performance
- $A$ = "Technology sector outperforms": $P(A) = 0.4$
- $B$ = "Portfolio return > 10%": $P(B) = 0.3$
- $P(B | A) = 0.6$

**Interpretation:** When tech outperforms, the portfolio has a 60% chance of returning more than 10%.

### Trading Strategies

**Example:** Signal-based trading
- $A$ = "Technical indicator signals buy": $P(A) = 0.3$
- $B$ = "Stock price increases next day": $P(B) = 0.5$
- $P(B | A) = 0.7$

**Interpretation:** When the indicator signals buy, the stock goes up 70% of the time (better than the unconditional 50%).

## Python Implementation

```python
def conditional_probability(p_intersection, p_given):
    """
    Calculate conditional probability P(B | A) = P(A ∩ B) / P(A)
    
    Parameters:
    p_intersection: P(A ∩ B)
    p_given: P(A)
    
    Returns:
    P(B | A) or None if P(A) = 0
    """
    if p_given == 0:
        return None  # Cannot condition on impossible event
    return p_intersection / p_given

def joint_probability(p_a, p_b_given_a):
    """
    Calculate joint probability P(A ∩ B) = P(A) * P(B | A)
    
    Parameters:
    p_a: P(A)
    p_b_given_a: P(B | A)
    
    Returns:
    P(A ∩ B)
    """
    return p_a * p_b_given_a

def chain_rule(probabilities):
    """
    Calculate P(A1 ∩ A2 ∩ ... ∩ An) using chain rule
    
    Parameters:
    probabilities: List of [P(A1), P(A2|A1), P(A3|A1∩A2), ...]
    
    Returns:
    Joint probability
    """
    result = 1.0
    for p in probabilities:
        result *= p
    return result

# Example 1: Card drawing
p_first_ace = 4/52
p_second_ace_given_first = 3/51
p_both_aces = joint_probability(p_first_ace, p_second_ace_given_first)
print(f"P(both aces) = {p_both_aces:.6f}")

# Example 2: Stock movement
p_bullish = 0.6
p_stock_up_given_bullish = 0.75
p_bullish_and_up = joint_probability(p_bullish, p_stock_up_given_bullish)
print(f"P(bullish and stock up) = {p_bullish_and_up:.2f}")

# Example 3: Three cards
p_three_aces = chain_rule([4/52, 3/51, 2/50])
print(f"P(three aces) = {p_three_aces:.6f}")

# Example 4: Conditional probability from joint
p_intersection = 0.45
p_given = 0.6
p_conditional = conditional_probability(p_intersection, p_given)
print(f"P(B | A) = {p_conditional:.2f}")
```

## Common Mistakes

1. **Reversing the condition**
   - **Wrong:** $P(A | B)$ when you need $P(B | A)$
   - **Fix:** Carefully identify which event is given (the condition)

2. **Dividing by zero**
   - **Wrong:** Calculating $P(B | A)$ when $P(A) = 0$
   - **Fix:** Check that $P(A) > 0$ before calculating

3. **Confusing conditional and unconditional probabilities**
   - **Wrong:** Using $P(B)$ when you need $P(B | A)$
   - **Fix:** Always check what information is given

4. **Assuming independence**
   - **Wrong:** Assuming $P(B | A) = P(B)$ without verification
   - **Fix:** Calculate both and compare

## Key Takeaways

1. **Conditional Probability**: $P(B | A) = \frac{P(A \cap B)}{P(A)}$ (provided $P(A) > 0$)
2. **Multiplication Rule**: $P(A \cap B) = P(A) \cdot P(B | A)$
3. **Independence**: $P(B | A) = P(B)$ if and only if $A$ and $B$ are independent
4. **Chain Rule**: Extends to multiple events: $P(A_1 \cap ... \cap A_n) = P(A_1) \cdot P(A_2 | A_1) \cdot ...$
5. **Financial Context**: Conditional probabilities are essential for risk assessment and decision-making

## Next Steps

In the next lesson, we'll explore more applications of conditional probability, including how to calculate probabilities of outcomes when multiple conditions are involved, and how conditional probability helps us understand complex dependent systems in quantitative finance.

