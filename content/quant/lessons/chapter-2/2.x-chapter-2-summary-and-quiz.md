---
title: "Chapter 2 summary and quiz"
chapter: 2
lesson: x
author: "Quant Probability Team"
date: "2025-01-15"
description: "Summary and quiz for Chapter 2: Conditional Probability"
---

# 2.x — Chapter 2 summary and quiz

## Chapter summary

In this chapter, we explored **conditional probability**, one of the most important concepts in probability theory and quantitative finance. Conditional probability allows us to update our beliefs about events when we receive new information.

### Key concepts

- **Conditional Probability**: The probability of an event given that another event has occurred - [Conditional Probability](https://en.wikipedia.org/wiki/Conditional_probability)
- **Dependent Events**: Events that influence each other's probabilities
- **Multiplication Rule**: Formula for calculating joint probabilities using conditional probabilities
- **Chain Rule**: Extension to multiple events
- **Conditional Outcomes**: Outcomes whose probabilities depend on other events

### What we learned

1. **Conditional Probability and Dependent Events (2.1)**:
   - Definition: $P(B | A) = \frac{P(A \cap B)}{P(A)}$ (provided $P(A) > 0$)
   - Multiplication rule: $P(A \cap B) = P(A) \cdot P(B | A)$
   - Relationship to independence: $P(B | A) = P(B)$ if and only if $A$ and $B$ are independent
   - Chain rule for multiple events: $P(A_1 \cap ... \cap A_n) = P(A_1) \cdot P(A_2 | A_1) \cdot ... \cdot P(A_n | A_1 \cap ... \cap A_{n-1})$

2. **Conditional Outcomes and Applications (2.2)**:
   - Conditional outcomes in complex scenarios
   - Probability trees for visualizing conditional scenarios
   - Law of Total Probability (introduction): $P(B) = \sum_i P(B | A_i) \cdot P(A_i)$
   - Conditional expectations: $E[X] = \sum_i E[X | A_i] \cdot P(A_i)$
   - Applications to risk assessment, portfolio management, and trading strategies

### Applications in quantitative finance

- **Risk Assessment**: Adjusting default probabilities based on economic conditions
- **Portfolio Management**: Calculating portfolio returns conditional on market regimes
- **Trading Strategies**: Evaluating signal accuracy under different market conditions
- **Credit Analysis**: Understanding default probabilities given borrower characteristics
- **Market Analysis**: Modeling stock movements conditional on market conditions

### Important formulas

| Concept | Formula |
|---------|---------|
| Conditional Probability | $P(B \mid A) = \frac{P(A \cap B)}{P(A)}$ |
| Multiplication Rule | $P(A \cap B) = P(A) \cdot P(B \mid A)$ |
| Chain Rule (2 events) | $P(A \cap B) = P(A) \cdot P(B \mid A)$ |
| Chain Rule (n events) | $P(A_1 \cap ... \cap A_n) = P(A_1) \cdot P(A_2 \mid A_1) \cdot ... \cdot P(A_n \mid A_1 \cap ... \cap A_{n-1})$ |
| Independence (conditional) | $P(B \mid A) = P(B)$ if and only if independent |
| Law of Total Probability | $P(B) = \sum_i P(B \mid A_i) \cdot P(A_i)$ (for mutually exclusive, exhaustive $A_i$) |
| Conditional Expectation | $E[X] = \sum_i E[X \mid A_i] \cdot P(A_i)$ |

### Next steps

In Chapter 3, we'll formally learn **Bayes' Theorem** and the **Law of Total Probability**, which provide powerful tools for:
- Updating probabilities when new information arrives
- Reversing conditional probabilities
- Making decisions under uncertainty
- Understanding how evidence affects our beliefs

These concepts are fundamental for quantitative finance applications like risk modeling, signal processing, and decision-making under uncertainty.

## Quiz time

**Question #1**

A fair die is rolled. Let:
- $A$ = "Roll an even number"
- $B$ = "Roll a number greater than 3"

Calculate:
- $P(A)$
- $P(B)$
- $P(A \cap B)$
- $P(B | A)$
- $P(A | B)$

<details>
<summary>Show Solution</summary>

Sample space: $\Omega = \{1, 2, 3, 4, 5, 6\}$

- $A = \{2, 4, 6\}$ (even numbers)
- $B = \{4, 5, 6\}$ (numbers > 3)
- $A \cap B = \{4, 6\}$ (even numbers > 3)

Since all outcomes are equally likely:

- $P(A) = \frac{3}{6} = \frac{1}{2}$
- $P(B) = \frac{3}{6} = \frac{1}{2}$
- $P(A \cap B) = \frac{2}{6} = \frac{1}{3}$

Using conditional probability formula:

$$P(B | A) = \frac{P(A \cap B)}{P(A)} = \frac{1/3}{1/2} = \frac{2}{3}$$

$$P(A | B) = \frac{P(A \cap B)}{P(B)} = \frac{1/3}{1/2} = \frac{2}{3}$$

**Interpretation:** 
- Given an even number, there's a $\frac{2}{3}$ chance it's greater than 3
- Given a number greater than 3, there's a $\frac{2}{3}$ chance it's even

</details>

**Question #2**

Two cards are drawn from a standard deck without replacement. Calculate:
- $P(\text{First card is an ace})$
- $P(\text{Second card is an ace} \mid \text{First card is an ace})$
- $P(\text{Both cards are aces})$

<details>
<summary>Show Solution</summary>

- $P(\text{First card is an ace}) = \frac{4}{52} = \frac{1}{13}$

- After drawing one ace, 3 aces remain out of 51 cards:
  $$P(\text{Second card is an ace} \mid \text{First card is an ace}) = \frac{3}{51} = \frac{1}{17}$$

- Using multiplication rule:
  $$P(\text{Both cards are aces}) = P(\text{First ace}) \cdot P(\text{Second ace} \mid \text{First ace}) = \frac{4}{52} \cdot \frac{3}{51} = \frac{12}{2652} = \frac{1}{221}$$

</details>

**Question #3**

A stock's movement depends on market conditions:
- Bull market (probability 0.6): Stock goes up with probability 0.8
- Bear market (probability 0.4): Stock goes up with probability 0.2

Calculate:
- $P(\text{Stock goes up})$ (unconditional probability)
- $P(\text{Bull market} \mid \text{Stock goes up})$

<details>
<summary>Show Solution</summary>

Let:
- $B$ = "Bull market": $P(B) = 0.6$
- $Bear$ = "Bear market": $P(Bear) = 0.4$
- $U$ = "Stock goes up"

**Part 1: Unconditional probability using Law of Total Probability:**

$$P(U) = P(U | B) \cdot P(B) + P(U | Bear) \cdot P(Bear)$$

$$P(U) = 0.8 \cdot 0.6 + 0.2 \cdot 0.4 = 0.48 + 0.08 = 0.56$$

**Part 2: Reversing the conditional probability (using the formula we'll learn as Bayes' Theorem in Chapter 3):**

$$P(B | U) = \frac{P(U | B) \cdot P(B)}{P(U)} = \frac{0.8 \cdot 0.6}{0.56} = \frac{0.48}{0.56} = \frac{6}{7} \approx 0.857$$

**Interpretation:** 
- The unconditional probability of the stock going up is 56%
- If the stock goes up, there's an 85.7% chance we're in a bull market

</details>

**Question #4**

A trading strategy has two signals:
- Signal 1 is correct with probability 0.7
- Signal 2 is correct with probability 0.6
- If Signal 1 is correct, Signal 2 is correct with probability 0.8
- If Signal 1 is incorrect, Signal 2 is correct with probability 0.3

Calculate:
- $P(\text{Both signals correct})$
- $P(\text{At least one signal correct})$
- $P(\text{Signal 1 correct} \mid \text{Signal 2 correct})$

<details>
<summary>Show Solution</summary>

Let:
- $S_1$ = "Signal 1 correct": $P(S_1) = 0.7$
- $S_2$ = "Signal 2 correct": $P(S_2 | S_1) = 0.8$, $P(S_2 | S_1^c) = 0.3$

**Part 1: Both signals correct**

$$P(S_1 \cap S_2) = P(S_1) \cdot P(S_2 | S_1) = 0.7 \cdot 0.8 = 0.56$$

**Part 2: At least one signal correct**

First, calculate $P(S_2)$ using Law of Total Probability:

$$P(S_2) = P(S_2 | S_1) \cdot P(S_1) + P(S_2 | S_1^c) \cdot P(S_1^c)$$

$$P(S_2) = 0.8 \cdot 0.7 + 0.3 \cdot 0.3 = 0.56 + 0.09 = 0.65$$

Now use addition rule:

$$P(S_1 \cup S_2) = P(S_1) + P(S_2) - P(S_1 \cap S_2) = 0.7 + 0.65 - 0.56 = 0.79$$

**Part 3: Reverse conditional probability**

$$P(S_1 | S_2) = \frac{P(S_1 \cap S_2)}{P(S_2)} = \frac{0.56}{0.65} = \frac{56}{65} \approx 0.862$$

**Interpretation:**
- Both signals are correct 56% of the time
- At least one signal is correct 79% of the time
- If Signal 2 is correct, Signal 1 is also correct 86.2% of the time

</details>

**Question #5**

A portfolio contains stocks from two sectors:
- Technology (60% of portfolio): Expected return 12%
- Finance (40% of portfolio): Expected return 8%

Calculate the unconditional expected return of the portfolio.

<details>
<summary>Show Solution</summary>

Let:
- $T$ = "Technology sector": $P(T) = 0.6$
- $F$ = "Finance sector": $P(F) = 0.4$
- $E[R | T] = 0.12$
- $E[R | F] = 0.08$

Using Law of Total Expectation:

$$E[R] = E[R | T] \cdot P(T) + E[R | F] \cdot P(F)$$

$$E[R] = 0.12 \cdot 0.6 + 0.08 \cdot 0.4 = 0.072 + 0.032 = 0.104$$

**Interpretation:** The unconditional expected return is 10.4%, which is a weighted average of the sector-specific expected returns.

</details>

**Question #6**

Three cards are drawn from a standard deck without replacement. Calculate the probability that all three are aces.

<details>
<summary>Show Solution</summary>

Using the chain rule:

$$P(\text{All three aces}) = P(\text{First ace}) \cdot P(\text{Second ace} \mid \text{First ace}) \cdot P(\text{Third ace} \mid \text{First two aces})$$

$$P(\text{All three aces}) = \frac{4}{52} \cdot \frac{3}{51} \cdot \frac{2}{50} = \frac{24}{132600} = \frac{1}{5525}$$

**Interpretation:** The probability of drawing three aces in a row (without replacement) is approximately 0.018% (1 in 5,525).

</details>

**Question #7**

Write Python code to:
1. Calculate conditional probability $P(B | A)$
2. Calculate joint probability using multiplication rule
3. Check if events are independent using conditional probability
4. Calculate unconditional probability using Law of Total Probability

<details>
<summary>Show Solution</summary>

```python
def conditional_probability(p_intersection, p_given):
    """Calculate P(B | A) = P(A ∩ B) / P(A)"""
    if p_given == 0:
        return None
    return p_intersection / p_given

def joint_probability(p_a, p_b_given_a):
    """Calculate P(A ∩ B) = P(A) * P(B | A)"""
    return p_a * p_b_given_a

def are_independent_conditional(p_a, p_b, p_b_given_a, tolerance=1e-6):
    """Check independence using conditional probability: P(B | A) = P(B)"""
    if p_a == 0:
        return None
    return abs(p_b_given_a - p_b) < tolerance

def law_of_total_probability(conditional_probs, prior_probs):
    """Calculate P(B) = sum of P(B | A_i) * P(A_i)"""
    if len(conditional_probs) != len(prior_probs):
        raise ValueError("Lists must have same length")
    return sum(c * p for c, p in zip(conditional_probs, prior_probs))

# Example 1: Conditional probability
p_intersection = 0.3
p_given = 0.6
p_conditional = conditional_probability(p_intersection, p_given)
print(f"P(B | A) = {p_conditional:.2f}")

# Example 2: Joint probability
p_a = 0.6
p_b_given_a = 0.5
p_joint = joint_probability(p_a, p_b_given_a)
print(f"P(A ∩ B) = {p_joint:.2f}")

# Example 3: Check independence
p_b = 0.5
is_independent = are_independent_conditional(p_a, p_b, p_b_given_a)
print(f"Are independent? {is_independent}")

# Example 4: Law of Total Probability
conditional_probs = [0.8, 0.2]  # P(up | bull), P(up | bear)
prior_probs = [0.6, 0.4]  # P(bull), P(bear)
p_unconditional = law_of_total_probability(conditional_probs, prior_probs)
print(f"P(up) = {p_unconditional:.2f}")
```

Output:
```
P(B | A) = 0.50
P(A ∩ B) = 0.30
Are independent? True
P(up) = 0.56
```

</details>

